<script>
  ;(function setColorModeVar(initialValue) {
    const mql = window.matchMedia("(prefers-color-scheme: dark)")
    const systemPreference = mql.matches ? "dark" : "light"

    const persistedPreference = localStorage.getItem("chakra-ui-color-mode")
    const isInStorage = typeof persistedPreference === "string"

    let colorMode

    if (isInStorage) {
      colorMode = persistedPreference
    } else {
      colorMode = initialValue === "system" ? systemPreference : initialValue
    }

    const root = document.documentElement
    root.style.setProperty("--chakra-ui-color-mode", colorMode)
  })("light")
</script>

# Popover

Popover is a non-modal dialog that floats around a trigger. It's used to display
contextual information to the user, and should be paired with a clickable
trigger element.

Popover is built on top of the [Popper.js](https://popper.js.org/) library.

## Import

- `Popover`: The wrapper that provides props, state, and context to it's
  children.
- `PopoverTrigger`: Used to wrap the reference (or trigger) element.
- `PopoverContent`: The popover itself.
- `PopoverHeader`: The header of the popover.
- `PopoverBody`: The body of the popover.
- `PopoverArrow`: A visual arrow that points to the reference (or trigger).
- `PopoverCloseButton`: Obviously, a button to close the popover.

```js
import {
  Popover,
  PopoverTrigger,
  PopoverContent,
  PopoverHeader,
  PopoverBody,
  PopoverFooter,
  PopoverArrow,
  PopoverCloseButton,
} from "@chakra-ui/core";
```

## Basic Usage

```jsx
function BasicExample() {
  const closeRef = React.useRef();
  return (
    <Popover initialFocusRef={closeRef}>
      <PopoverTrigger>
        <Button>Trigger</Button>
      </PopoverTrigger>
      <PopoverContent zIndex={20}>
        <PopoverArrow />
        <PopoverHeader>Header</PopoverHeader>
        <PopoverCloseButton />
        <PopoverBody>
          <Button variantColor="blue" ref={closeRef}>
            Button
          </Button>
        </PopoverBody>
        <PopoverFooter>This is the footer</PopoverFooter>
      </PopoverContent>
    </Popover>
  );
}
```

## Using Portal

The popovers don't display in a portal by default. To use a portal, Import the
`Portal` component.

```jsx
// import { Portal } from "@chakra-ui/core"

function BasicExample() {
  return (
    <Popover>
      <PopoverTrigger>
        <Button>Trigger</Button>
      </PopoverTrigger>
      <ChakraPortal>
        <PopoverContent>
          <PopoverArrow />
          <PopoverHeader>Header</PopoverHeader>
          <PopoverCloseButton />
          <PopoverBody>
            <Button variantColor="blue">Button</Button>
          </PopoverBody>
          <PopoverFooter>This is the footer</PopoverFooter>
        </PopoverContent>
      </ChakraPortal>
    </Popover>
  );
}
```

## Trapping Focus

The popovers don't display in a portal by default. To use a portal, Import the
`Portal` component.

```jsx
// import { Portal } from "@chakra-ui/core"
// import  FocusLock from "react-focus-lock"

<Popover closeOnBlur={false}>
  <PopoverTrigger>
    <Button>Trigger</Button>
  </PopoverTrigger>
  <Portal>
    <PopoverContent>
      <FocusLock returnFocus persistentFocus={false}>
        <PopoverHeader>Header</PopoverHeader>
        <PopoverCloseButton />
        <PopoverBody>
          <Button variantColor="blue">Close</Button>
        </PopoverBody>
        <PopoverFooter>This is the footer</PopoverFooter>
      </FocusLock>
    </PopoverContent>
  </Portal>
</Popover>
```

## Popover with no arrow

In some cases, you might not need to use the PopoverArrow. Pass the `hasArrow`
prop to the `PopoverContent` and set to `false`. This will remove the internal
margin set on the `PopoverContent` to allow for the arrow.

TO DO: Show Example.

## Customizing the Popover

Chakra exports all the components you need to customize the look and feel of the
popover. You can change the background, arrow size, boxShadow and so on.

TO DO: Show Example.

## Accessiblity

- The `Popover` element has role set to `dialog`
- The dialog should be labelled, this can be achieved in two ways:
- Apply the `aria-labelledby` attribute to the dialog element and set the value
  to be the ID of the main Heading element in the Popover (if it provides a good
  and meaningful title to the dialog)
- If no Heading element is present, use the `aria-label` attribute and set the
  value to be a meaningful title of the dialog
- The dialog should be described where possible. This can be achieved by
  applying the `aria-describedby` attribute to the dialog element and set the
  value to be the id of the Popover body

## Props

| Name              | Type                                                                                                                                                                           | Default  | Description                                                                                                                                                                                                                |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `isOpen`          | `boolean`                                                                                                                                                                      | `false`  | If `true`, the popover is shown                                                                                                                                                                                            |
| `defaultOpen`     | `boolean`                                                                                                                                                                      | `false`  | If `true`, the popover is shown by default                                                                                                                                                                                 |
| `maxWidth`        | `string`, `number`                                                                                                                                                             |          | The maximum width of the popover                                                                                                                                                                                           |
| `trigger`         | `React.ReactNode`                                                                                                                                                              | `false`  | Element that triggers the display of the popover. Most times a `Button` or a `Link`                                                                                                                                        |
| `placement`       | `auto-start`, `auto`, `auto-end`, `top-start`, `top`, `top-end`, `right-start`, `right`, `right-end`, `bottom-end`, `bottom`, `bottom-start`, `left-end`, `left`, `left-start` | `bottom` | Determines how the popover is displayed relative to the trigger element as well as surrounding elements                                                                                                                    |
| `children`        | `React.ReactNode`                                                                                                                                                              |          | The children of the popover                                                                                                                                                                                                |
| `showArrow`       | `boolean`                                                                                                                                                                      | `false`  | If `true` display an arrow tip on the popover. This is displayed relative to the `placement` of the popover                                                                                                                |
| `showCloseButton` | `boolean`                                                                                                                                                                      | `false`  | If `true` display a close button to close the popover                                                                                                                                                                      |
| `initialFocusRef` | `React.Ref`                                                                                                                                                                    |          | The ref to the initial element to receive focus when the popover opens                                                                                                                                                     |
| `usePortal`       | `boolean`                                                                                                                                                                      | `true`   | If `true` the popover is displayed with a `Portal`. Rendering content inside a Portal allows the popover content to escape the physical bounds of its parent while still being positioned correctly relative to its target |
| `trapFocus`       | `boolean`                                                                                                                                                                      | `false`  | If `true` focus will be brought inside the popover                                                                                                                                                                         |
| `onOpenChange`    | `function`                                                                                                                                                                     |          | Function called when the value controlling the opening/closing of the popover changes                                                                                                                                      |
| `closeOnBlur`     | `boolean`                                                                                                                                                                      | `false`  | If `true`, close the popover when focus is taken away from the popover                                                                                                                                                     |
| `closeOnEsc`      | `boolean`                                                                                                                                                                      | `false`  | If `true`, close the popover when the `esc` key is pressed                                                                                                                                                                 |
